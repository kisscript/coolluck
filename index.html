<!DOCTYPE html><html>
  <link rel="icon" href="favicon.png" type="image/png">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <style>
    body { background: #ddd; }
    canvas { left: 0; position: absolute; top: 0; }
  </style>
  <title>Coolluck</title>
<head>

</head><body>
<script>

var w = window;
var d = w.document;

var g =
{
  set a (a)
  {
    var x = g.c.x (b.x);
    var y = g.c.y (b.y);
    var w = g.c.x (b.w);
    var h = g.c.y (b.h);
    var r = g.c.xymin (b.r);
    var a = a;
        a.id = (a.id) ? a.id : g.animate.length;
        a.s = [];
        a.t = 0;
        a.tick = (a.tick) ? a.tick : a.time / a.step.length;
        a.time = (a.time) ? a.time : a.tick * a.step.length;
    g.animate[a.id] = a;
  },

  animate: [],

  set b (b)
  {
    var x = g.c.x (b.x);
    var y = g.c.y (b.y);
    var w = g.c.x (b.w);
    var h = g.c.y (b.h);
    var r = g.c.xymin (b.r);
    var b = b;
        b.actived = false;
        b.id = (b.id) ? b.id : 'b' + g.button.length;
        b.showed = false;

        b.i = b.id + b.i0.name;

        b.action = function ()
        {
          if (g.e.type == 'click')
          {
            var inzone = (b.r) ? g.c.inring (x, y, r) : g.c.inbox (x, y, w, h);
            if (inzone)
            {
              b.a ();
            };
          };
        };

        b.active = function ()
        {
          if (g.e.type == 'mousemove')
          {
            var inzone = (b.r) ? g.c.inring (x, y, r) : g.c.inbox (x, y, w, h);
            if (inzone)
            {
              if (!b.actived)
              {
                var _ = (b.over) ? b.over () : undefined;
                g.c.style.cursor = 'pointer';
                b.i = (b.r) ? b.id : b.id + b.i0.name;
                var _ = (b.b == undefined) ? b.hide (b.i) : undefined;
                var _ = (b.b == undefined) ? b.show (b.i1) : undefined;
                b.actived = true;
              };
            }
            else
            {
              if (b.actived)
              {
                var _ = (b.out) ? b.out () : undefined;
                g.c.style.cursor = 'default';
                b.i = (b.r) ? b.id : b.id + b.i1.name;
                var _ = (b.b == undefined) ? b.hide (b.i) : undefined;
                var _ = (b.b == undefined) ? b.show (b.i0) : undefined;
                b.actived = false;
              };
            };
          };
        };

        b.destroy = function ()
        {
          g.c.style.cursor = 'default';
          b.hide (b.id);
          b.hide (b.id + b.i0.name);
          b.hide (b.id + b.i1.name);
          delete g.button[b.id];
        };

        b.hide = function (id)
        {
            b.showed = false;
            delete g.scene[id];
        };

        b.show = function (i)
        {
          if (!b.showed)
          {
            var _ = (b.r) ? g.d = { x: b.x, y: b.y, r: b.r, f: b.f, c: i, id: b.id } : g.d = { x: b.x, y: b.y, h: b.h, w: b.w, i: i, id: b.id + i.name };
            b.showed = true;
          };
        };

        b.update = function ()
        {
          x = g.c.x (b.x);
          y = g.c.y (b.y);
          w = g.c.x (b.w);
          h = g.c.y (b.h);
          r = g.c.xymin (b.r);
          b.action ();
          b.active ();
        };

    b.show (b.i0);
    g.button[b.id] = b;
  },

  button: [],

  c: function ()
  {
    var c = w.d.createElement ('canvas');
        c.a = function ()
        {
          c.height = w.innerHeight;
          c.width = w.innerWidth;
        };

        c.c = c.getContext ('2d');

        c.inbox = function (x, y, w, h)
        {
          return ((g.e.x >= x) && (g.e.x <= x + w) && (g.e.y >= y) && (g.e.y <= y + h));
        };

        c.inring = function (x, y, r)
        {
          var l = Math.sqrt (Math.pow (g.e.x - x, 2) + Math.pow (g.e.y - y, 2));
          return (l <= r);
        };

        c.update = function ()
        {
          switch (g.e.type) {
            case 'resize':
              c.a ();
              break;
          }
        };

        c.x = function (x)
        {
          var x = (x <= 1) ? x * g.c.width : x;
          return x;
        };

        c.xymin = function (xy)
        {
          var xy = (xy <= 1) ? xy * Math.min (g.c.height, g.c.width) : xy;
          return xy;
        };

        c.y = function (y)
        {
          var y = (y <= 1) ? y * g.c.height : y;
          return y;
        };

        delete g['c'];

        g.c = c;
        c.a ();
        w.d.body.appendChild (g.c);
  },

  city: [],

  set d (c)
  {
    var c = c;
        /*
          c - color
          f - fill
          s - size
        */

        c.id = (c.id) ? c.id : g.scene.length;
        c.a0 = (c.a0) ? c.a0 : 0;
        c.a1 = (c.a1) ? c.a1 : 2 * Math.PI;

        c.type = 'box'; // h w x y
        c.type = (c.i) ? 'image' : c.type; // i x y
        c.type = (c.a) ? 'line' : c.type; // a b x y
        c.type = (c.r) ? 'ring' : c.type; // r x y
        c.type = (c.t) ? 'text' : c.type; // t x y

        g.scene[c.id] = c;
  },

  draw: function ()
  {
    g.c.c.clearRect (0, 0, g.c.width, g.c.height);

    for (var id in g.scene)
    {
      var c = g.scene[id];

      var a = g.c.x (c.a);
      var b = g.c.y (c.b);

      var x = g.c.x (c.x);
      var y = g.c.y (c.y);

      var w = g.c.x (c.w);
      var h = g.c.y (c.h);

      var r = g.c.xymin (c.r);

      g.c.c.beginPath ();
      g.c.c.lineWidth = (c.s) ? c.s : 1;
      var _ = (c.f) ? g.c.c.fillStyle = c.c : g.c.c.strokeStyle = c.c;
      var _ = (c.dash) ? g.c.c.setLineDash (c.dash) : undefined;
      var _ = (c.offset) ? g.c.c.lineDashOffset = c.offset : undefined;
      switch (c.type)
      {
        case 'box':
          var _ = (c.f) ? g.c.c.fillRect (x, y, w, h) : g.c.c.strokeRect (x, y, w, h);
          break;

        case 'image':
          var _ = (c.h) ? g.c.c.drawImage (c.i, x, y, w, h) : g.c.c.drawImage (c.i, x, y);
          break;

        case 'line':
          g.c.c.moveTo (a, b);
          g.c.c.lineTo (x, y);
          g.c.c.stroke ();
          break;

        case 'ring':
          g.c.c.arc (x, y, r, c.a0, c.a1);
          var _ = (c.f) ? g.c.c.fill () : g.c.c.stroke ();
          break;

        case 'text':
          g.c.c.font = (c.s) ? c.s + ' ' + g.s.font.family : g.s.font.size + ' ' + g.s.font.family;
          var _ = (c.f) ? g.c.c.fillText (c.t, x, y) : g.c.c.strokeText (c.t, x, y) ;
          break;
      }
    };
  },

  e: {},

  effect:
  {
    set circle (e)
    {
      var x = g.c.x (e.x);
      var y = g.c.y (e.y);
      var r = 1;
      var id = 'effect_circle';
      var R = Math.min (g.c.height * 2, g.c.width * 2);
      var steps = 40;

      var o = {};
          o.id = id;

          o.animate = function ()
          {
            if (g.e.type == 'tick')
            {
              r += R / steps;
              if (r < R)
              {
                delete g.scene[id];
                g.d = { x: x, y: y, r: r, c: e.c, f: true, id: id };
              }
              else
              {
                delete g.scene[id];
                delete g.o[id];
                e.next ();
              };
            };
          };

          o.update = function ()
          {
            o.animate ();
          };

      g.o[id] = o;
    }
  },

  event: function (event)
  {
    g.e = event;
    g.run ();
  },

  g:
  {
    set camp (o)
    {
      o.id = 'camp';
      o.moved = false;

      var idrad = 'camp_zone';
      o.out = function ()
      {
        delete g.scene[idrad];
      };

      o.over = function ()
      {
        g.d = { x: o.x, y: o.y, r: o.r2, c: g.s.camp.color2, id: idrad, dash: [1, 3] };
      };

      o.scout = function ()
      {
        var civ = 0;
        for (var id in g.o)
        {
          if (g.o[id].type == 'citizen')
          {
            var citizen = g.o[id];
            var x1 = o.x; var x2 = citizen.x;
            var y1 = o.y; var y2 = citizen.y;
            var s = Math.sqrt (Math.pow (x1 - x2, 2) + Math.pow (y1 - y2, 2));
            if (s < g.s.camp.size2)
            {
              civ++;
            };
          };
        };
        return civ;
      };

      o.beside = 0;
      o.besider = function ()
      {
        if (g.e.type == 'tick')
        {
          var beside = o.scout();
          if (o.beside != beside)
          {
            o.beside = beside;
            var id = 'campinf';
            delete g.scene[id];
            g.d = { x: o.x, y: o.y, t: beside, id: id, f: true, c: g.s.citizen.color };
          };
        };
      };

      o.nat = 0;
      o.setnat0 = function ()
      {
        o.nat = 0;
        g.button[idm0].destroy ();
        delete g.scene[idm0];
        delete g.scene[idt0];
      };

      o.setnat1 = function ()
      {
        o.nat = 1;
        g.button[idm1].destroy ();
        delete g.scene[idm1];
        delete g.scene[idt1];
      };

      o.setnall = function ()
      {
        o.nat = g.s.citizen.n;
        g.button[idma].destroy ();
        delete g.scene[idma];
        delete g.scene[idta];
      };

      var idm0 = o.id + 'm0'; var idt0 = o.id + 't0';
      var idm1 = o.id + 'm1'; var idt1 = o.id + 't1';
      var idma = o.id + 'ma'; var idta = o.id + 'ta';
      var openmenu = false;
      var inzone = false;
      o.openmenu = function ()
      {
        openmenu = true;

        //set 0
        var dx = (g.c.x (o.x) + 0 * g.c.xymin (o.r)) / g.c.width;
        var dy = (g.c.y (o.y) - 2.5 * g.c.xymin (o.r)) / g.c.height;
        g.b = { x: dx, y: dy, b: true, r: o.r, f: true, i0: g.s.camp.menu.color, i1: g.s.camp.menu.color, a: o.setnat0, id: idm0 };
        g.d = { x: dx, y: dy, t: 'no', f: true, c: g.s.citizen.color, id: idt0 };

        //set 1
        var dx = (g.c.x (o.x) + 2 * g.c.xymin (o.r)) / g.c.width;
        var dy = (g.c.y (o.y) - 1.5 * g.c.xymin (o.r)) / g.c.height;
        g.b = { x: dx, y: dy, b: true, r: o.r, f: true, i0: g.s.camp.menu.color, i1: g.s.camp.menu.color, a: o.setnat1, id: idm1 };
        g.d = { x: dx, y: dy, t: '1', f: true, c: g.s.citizen.color, id: idt1 };

        //set a
        var dx = (g.c.x (o.x) + 2.3 * g.c.xymin (o.r)) / g.c.width;
        var dy = (g.c.y (o.y) + 0.7 * g.c.xymin (o.r)) / g.c.height;
        g.b = { x: dx, y: dy, b: true, r: o.r, f: true, i0: g.s.camp.menu.color, i1: g.s.camp.menu.color, a: o.setnall, id: idma };
        g.d = { x: dx, y: dy, t: 'all', f: true, c: g.s.citizen.color, id: idta };
      };

      o.closemenu = function ()
      {
        if ((g.e.type == 'click') && (!inzone))
        {
          if (openmenu)
          {
            openmenu = false;
            var _ = (g.button[idm0]) ? g.button[idm0].destroy () : undefined;
            var _ = (g.button[idm1]) ? g.button[idm1].destroy () : undefined;
            var _ = (g.button[idma]) ? g.button[idma].destroy () : undefined;
            delete g.scene[idm0]; delete g.scene[idt0];
            delete g.scene[idm1]; delete g.scene[idt1];
            delete g.scene[idma]; delete g.scene[idta];
          };
        };
        inzone = false;
      };

      o.click = function ()
      {
        inzone = true;
        o.openmenu ();
      };

      var movefirst = true;
      o.move = function ()
      {
        if (!o.moved)
        {
          var id = 'camp_move';
          var id2 = 'camp_move2';
          var id3 = 'camp';
          var r = g.c.xymin (g.s.camp.size);
          var r2 = g.c.xymin (g.s.camp.size2);
          if ((g.e.type == 'mousemove') || (movefirst))
          {
            movefirst = false;
            delete g.scene[id];
            delete g.scene[id2];
            delete g.scene[id + 'tip'];
            g.d = { x: g.e.x, y: g.e.y, r: r, c: g.s.camp.color, id: id, dash: [], f: true };
            g.d = { x: g.e.x, y: g.e.y, r: r2, c: g.s.camp.color2, id: id2, dash: [] };
            g.d = { x: 0.5, y: 0.5, t: 'Choose a place for camp', f: true, c: g.s.camp.color2, id: id + 'tip' };
          };

          if (g.e.type == 'click')
          {
            delete g.scene[id];
            delete g.scene[id2];
            delete g.scene[id + 'tip'];
            o.x = g.e.x / g.c.width;
            o.y = g.e.y / g.c.height;
            o.r = r / Math.min (g.c.height, g.c.width);
            o.r2 = r2 / Math.min (g.c.height, g.c.width);
            g.b = { x: o.x, y: o.y, r: o.r, i0: g.s.camp.color, i1: g.s.camp.color2, id: id3, dash: [], f: true, a: o.click, out: o.out, over: o.over };
            o.moved = true;
          };
        };
      };

      o.update = function ()
      {
        o.move ();
        o.besider ();
        o.closemenu ();
      };
      g.o[o.id] = o;
    },

    set chest (o)
    {
      o.id = 'chest';

      o.click = function ()
      {
        g.log = o.id;
      };

      delete g.scene[o.id];
      g.b = { x: g.s.chest.x, y: g.s.chest.y, h: g.s.chest.h, w: g.s.chest.w, i0: g.i.chest, i1: g.i.chest1, a: o.click };

      o.update = function ()
      {

      };
      g.o[o.id] = o;
    },

    set citizen (o)
    {
      o.id = 'citizen' + Object.keys (g.o).length;
      o.name = g.s.citizen.name[g.r (0, g.s.citizen.name.length - 1, true)];
      o.type = 'citizen';

      o.gold = g.r (g.s.citizen.gold.min, g.s.citizen.gold.max, true);
      o.hp = g.r (g.s.citizen.hp.min, g.s.citizen.hp.max, true);
      o.power = g.r (g.s.citizen.power.min, g.s.citizen.power.max, true);
      o.speed = g.r (g.s.citizen.speed.min, g.s.citizen.speed.max, true);

      o.gethome = function ()
      {
        var home = g.r (0, g.s.city.n - 1, true);
        var i = 0;
        for (var id in g.city)
        {
          if (i == home)
          {
            home = g.city[id];
            break;
          };
          i++;
        };
        return home;
      };
      o.home = o.gethome ();
      o.town = o.home;

      o.select = function ()
      {
        var n = g.r (0, g.s.city.n, true);
        var i = 0;
        for (var id in g.city)
        {
          var c = g.city[id];
          if (i == n)
          {
            if (c.id == o.town.id)
            {
              o.goto = o.select ();
              return;
            }
            else
            {
              return g.city[id];
            };
          };
          i++;
        };
      };
      o.goto = o.select ();

      o.x = o.home.x;
      o.y = o.home.y;
      g.d = { x: o.x, y: o.y, r: g.s.citizen.size, f: true, c: g.s.citizen.color, id: o.id + o.name };

      var oldtime = g.o.clock.time;
      var step = 1 / g.s.clock.d / g.s.tick * o.speed * 0.2;
      var path = 0;
      o.move = function ()
      {
        if (o.goto == undefined)
        {
          o.goto = o.select ();
        }
        else
        {
          if (g.e.type == 'tick')
          {
            var x1 = o.town.x; var y1 = o.town.y;
            var x2 = o.goto.x; var y2 = o.goto.y;
            var s = Math.sqrt (Math.pow (x1 - x2, 2) + Math.pow (y1 - y2, 2));
            if (path <= s)
            {
              var l1 = path;
              var l2 = s - path;
              var l12 = l1/l2;
              var x = (x1 + x2 * l12) / (1 + l12); var y = (y1 + y2 * l12) / (1 + l12);
              o.x = x; o.y = y;
              x = g.c.x (x); y = g.c.y (y);
              path += step;
              delete g.scene[o.id + o.name];
              g.d = { x: x, y: y, r: g.s.citizen.size, f: true, c: g.s.citizen.color, id: o.id + o.name };
            }
            else
            {
              path = 0;
              o.town = o.goto;
              o.goto = o.select ();
            };
          };
        };
      };

      o.update = function ()
      {
        o.move ();
      };
      g.o[o.id] = o;
    },

    set city (o)
    {
      o.id = (o.id) ? o.id : 'city' + Object.keys (g.o).length;
      o.name = g.s.city.name[g.r (0, g.s.city.name.length - 1, true)];

      o.ready = function ()
      {
        var ready = true;
        for (var id in g.city)
        {
          var c = g.city[id];

          var r0 = g.c.xymin (c.r);
          var x0 = g.c.x (c.x);
          var y0 = g.c.y (c.y);

          var r1 = g.c.xymin (o.r);
          var x1 = g.c.x (o.x);
          var y1 = g.c.y (o.y);

          var r = Math.sqrt (Math.pow (x1 - x0, 2) + Math.pow (y1 - y0, 2));
          if (r < r0 + r1 + g.s.city.between)
          {
            ready = false;
            break;
          };
        };
        return ready;
      };

      if (g.city != [])
      {
        var ready = false;
        while (!ready)
        {
          o.x = g.r (g.s.city.x, g.s.city.y);
          o.y = g.r (g.s.city.x, g.s.city.y);
          o.r = g.r (g.s.city.rmin, g.s.city.rmax);
          ready = o.ready ();
        };
      }
      else
      {
        o.x = g.r (g.s.city.x, g.s.city.y);
        o.y = g.r (g.s.city.x, g.s.city.y);
        o.r = g.r (g.s.city.rmin, g.s.city.rmax);
      };

      var tid = o.id + 'text';
      o.out = function ()
      {
        delete g.scene[tid];
      };

      o.click = function ()
      {
        g.log = o.name;
      };

      o.over = function ()
      {
        g.d = { x: o.x, y: o.y - 1.5 * o.r, c: g.s.city.color.default, t: o.name, f: true, id: tid };
      };

      var x = o.x;
      var y = o.y;
      var r = o.r;
      g.b =
      { f: true, x: x, y: y, r: r, i0: g.s.city.color.default, i1: g.s.city.color.active, id: o.id, out: o.out, over: o.over, a: o.click };

      o.update = function ()
      {
        //o.show ();
      };
      g.city[o.id] = o;
    },

    set clock (o)
    {
      o.id = 'clock';

      o.day = 0;
      o.angle = -0.49 * Math.PI;
      o.time = 0;

      o.tick = function ()
      {
        if (g.e.type == 'tick')
        {
          o.show (false);
          o.show (true);
        };
      };

      o.sun = 'day';

      o.showed = false;
      o.show = function (show)
      {
        if (show)
        {
          o.angle += Math.PI / (g.s.clock.d * 500 / g.s.tick);
          if (o.angle > 1.5 * Math.PI)
          {
            o.sun = 'day';
            o.angle = -0.49 * Math.PI;
            o.day++;
          };
          if ((o.angle > 0.5 * Math.PI) && (o.sun == 'day'))
          {
            o.sun = 'night';
          };
          var x = g.c.x (g.s.clock.x);
          var y = g.c.y (g.s.clock.y);
          var r = g.c.xymin (g.s.clock.r);
          if ((Math.floor (g.s.time / 1000) > o.time)) { o.time = Math.round (g.s.time / 1000); };
          g.d = { x: x, y: y, r: r, a0: 0.5 * Math.PI, a1: 1.5 * Math.PI, f: true, c: g.s.clock.color, id: o.id + 'bg' };
          g.d = { x: x, y: y, r: r, a0: 1.5 * Math.PI, a1: 0.5 * Math.PI, f: true, c: g.s.clock.color3, id: o.id + 'day' };
          g.d = { x: x, y: y, r: r - 2, a0: 1.5 * Math.PI, a1: o.angle + 0.1, s: 5, f: false, c: g.s.clock.color2, id: o.id + 'shadow', dash: [] };
          var _ = (o.sun == 'day') ? w.d.body.style.background = g.s.clock.color4 : w.d.body.style.background = g.s.clock.color2;
          var csun = (o.sun == 'day') ? g.s.clock.color3 : g.s.clock.color;
          g.d = { x: x, y: y, r: r, a0: 1.5 * Math.PI, a1: o.angle, s: 5, f: false, c: csun, id: o.id, dash: [] };
          g.c.c.textAlign = 'center';
          g.c.c.textBaseline = 'middle';
          g.d = { x: x, y: y, t: o.day.toString (), c: g.s.clock.color2, s: g.s.clock.size, id: o.id + 'texts' };
          g.d = { x: x, y: y, t: o.day.toString (), f: true, c: g.s.clock.color3, s: g.s.clock.size, id: o.id + 'text' };

        }
        else
        {
          delete g.scene[o.id];
          delete g.scene[o.id + 'bg'];
          delete g.scene[o.id + 'day'];
          delete g.scene[o.id + 'shadow'];
          delete g.scene[o.id + 'text'];
          delete g.scene[o.id + 'texts'];
        };
      };

      o.update = function ()
      {
        o.tick ();
      };
      g.o[o.id] = o;
    },

    set paths (o)
    {
      var i = 0;
      for (var id in g.city)
      {
        o.begin = g.city[id];
        g.path[id] = {};
        i++;
        var j = 0;
        for (var id2 in g.city)
        {
          j++;
          if ((id != id2) && (j > i))
          {
            o.end = g.city[id2];

            var a = o.begin.x;
            var b = o.begin.y;

            var x = o.end.x;
            var y = o.end.y;

            o.id = o.begin.id + o.end.id;
            g.d = { a: a, b: b, x: x, y: y, c: '#888', dash: [4, 4], id: o.id };
            o.s = Math.sqrt (Math.pow (a - x, 2) + Math.pow (b - y, 2));

            o.offset = 0;
            o.animate = function ()
            {
              if (g.e.type == 'tick')
              {
                delete g.scene[o.id];
                if (o.offset < 8) { o.offset += 0.02; } else { o.offset = 0; };
                g.d = { a: a, b: b, x: x, y: y, c: '#888', dash: [4, 4], offset: o.offset, id: o.id };
              }
            };

            o.update = function ()
            {
              o.animate ();
            };

            g.path[id][id2] = o;
          };
        };
      };
    }
  },

  i:
  {
    set l (list)
    {
      for (var id in list)
      {
        var i = new Image ();
            i.name = id;
            i.src = list[id];
        g.i[id] = i;
      };
    }
  },

  load: function ()
  {
    g.e = { type: 'preload' };
    w.oncontextmenu = function () { return false; };

    g.c ();

    //window
    Object.defineProperty
    (
    	w,
    	'ontick',
    	{
    		set: function (f)
    		{
    			w.timer = w.setInterval
    			(
    				function ()
    				{
    					f ({ type: 'tick' });
    					g.s.time += g.s.tick;
    				},
    				g.s.tick
    			);
    		}
    	}
    );

    w.onclick = g.event;
    w.onload = g.event;
    w.onmousedown = g.event;
    w.onmousemove = g.event;
    w.onmouseup = g.event;
    w.onresize = g.event;
    w.ontick = g.event;
  },

  set log (text)
  {
    w.console.log (text);
  },

  o: [],

  path: [],

  r: function (min, max, floor)
  {
    var r = (max) ? Math.random () * (max - min) + min : Math.random () * min;
        r = (floor) ? Math.floor (Math.random() * (max - min + 1)) + min : r;
    return r;
  },

  run: function ()
  {
    g.update ();
    g.draw ();
  },

  s:
  {
    camp:
    {
      color: '#87c',
      color2: '#a6c',
      menu:
      {
        color: '#a9e',
        h: 8,
        w: 3
      },
      size: 0.025,
      size2: 0.05
    },

    chest:
    {
      h: 45,
      w: 53,
      x: 0.5 - 26.5 / w.innerWidth,
      y: 0.9
    },

    citizen:
    {
      color: '#3FDBFF',
      gold: { min: 0, max: 10 },
      hp: { min: 1, max: 10 },
      n: 10,
      now: 0,
      name: [ 'Дарк', 'Нульч', 'Творог', 'Ыыыыы', 'Кожемяка', 'Абу', 'Педро', 'Модер', 'Твити', 'Лесси' ],
      power: { min: 0, max: 5 },
      size: 0.01,
      speed: { min: 1, max: 10 }
    },

    city:
    {
      color:
      {
        active: '#888',
        default: '#888'
      },
      name: [ 'Битардск', 'Сычов', 'Мухосранск', 'Наш Крым', 'Ерохеевка', 'Абучан', 'Нульчан', 'Сырнарния', 'Охрененск', 'Зашкваринск' ],
      path:
      {
        min: 3,
        max: 20
      },
      rmin: 0.03,
      rmax: 0.05,
      between: 0.1 * Math.min (w.innerHeight, w.innerWidth),
      n: 5,
      x: 0.15,
      y: 0.85
    },

    clock:
    {
      color: '#87c',
      color2: '#555',
      color3: '#fff',
      color4: '#ddd',
      d: 60,
      r: 0.05,
      size: '1.5em',
      x: 0.5,
      y: 0.055
    },

    font:
    {
      family: 'Arial',
      size: '1em'
    },

    path:
    {
      ini: false
    },

    tick: 25,
    time: 0
  },

  scene: [],

  update: function ()
  {
    g.c.update ();
    for (var id in g.button) { g.button[id].update (); };
    for (var id in g.city) { g.city[id].update (); };
    for (var id in g.o) { g.o[id].update (); };
    for (var id in g.path)
    {
      for (var id2 in g.path[id])
      {
        g.path[id][id2].update ();
      };
    };
  }
};

g.load ();
g.run ();

g.i.l =
{
  chest: 'chest.svg',
  chest1: 'chest1.svg',
  logo: 'logo.svg',
  logo1: 'logo1.svg'
};

var x = (g.c.width/2 - 59/2) / g.c.width;
var y = (g.c.height/2 - 72/2) / g.c.height;

g.b =
{ x: x, y: y, h: 72, w: 59, i0: g.i.logo, i1: g.i.logo1, id: 'logo',
  a: function ()
  {
    var x = (g.c.width/2) / g.c.width;
    var y = (g.c.height/2) / g.c.height;
    g.effect.circle = { x: x, y: y, c: '#bbb',
      next: function ()
      {
        g.g.clock = {};
        g.g.chest = {};
        for (var i = 0; i < g.s.city.n; i++) { g.g.city = { id: 'city' + i }; };
        g.g.paths = {};
        for (var i = 0; i < g.s.citizen.n; i++) { g.g.citizen = {}; };
        g.g.camp = {};
      }
    };
    g.button['logo'].destroy ();
  }
};

</script></body></html>
