<!DOCTYPE html><html>
  <link rel="icon" href="favicon.png" type="image/png">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <style>
    canvas {left: 0; position: absolute; top: 0;}
  </style>
  <title>Coolluck</title>
<head>

</head><body><script>

var w = window;
var d = w.document;

var g =
{

  set b (b)
  {
    var x = g.c.x (b.x);
    var y = g.c.y (b.y);
    var w = g.c.x (b.w);
    var h = g.c.y (b.h);
    var r = g.c.xymin (b.r);
    var b = b;
        b.actived = false;
        b.id = (b.id) ? b.id : g.buttons.length;
        b.showed = false;

        b.action = function ()
        {
          if (g.e.type == 'click')
          {
            if ((g.e.x >= x) && (g.e.x <= x + w) && (g.e.y >= y) && (g.e.y <= y + h))
            {
              b.a ();
            };
          };
        };

        b.active = function ()
        {
          if (g.e.type == 'mousemove')
          {
            if ((g.e.x >= x) && (g.e.x <= x + w) && (g.e.y >= y) && (g.e.y <= y + h))
            {
              if (!b.actived)
              {
                g.c.style.cursor = 'pointer';
                b.hide (b.id + b.i0.name);
                b.show (b.i1);
                b.actived = true;
              };
            }
            else
            {
              if (b.actived)
              {
                g.c.style.cursor = 'default';
                b.hide (b.id + b.i1.name);
                b.show (b.i0);
                b.actived = false;
              };
            };
          };
        };

        b.hide = function (id)
        {
            b.showed = false;
            delete g.scene[id];
        };

        b.show = function (i)
        {
          if (!b.showed)
          {
            var _ = (b.r) ? g.d = { x: b.x, y: b.y, r: b.r, f: b.f, id: b.id } : g.d = { x: b.x, y: b.y, h: b.h, w: b.w, i: i, id: b.id + i.name };
            b.showed = true;
          };
        };

        b.update = function ()
        {
          b.action ();
          b.active ();
        };

    b.show (b.i0);
    g.buttons[b.id] = b;
  },

  buttons: [],

  c: function ()
  {
    var c = w.d.createElement ('canvas');
        c.a = function ()
        {
          c.height = w.innerHeight;
          c.width = w.innerWidth;
        };
        c.c = c.getContext ('2d');
        c.update = function ()
        {
          switch (g.e.type) {
            case 'resize':
              c.a ();
              break;
          }
        };
        c.x = function (x)
        {
          var x = (x <= 1) ? x * g.c.width : x;
          return x;
        };
        c.xymin = function (xy)
        {
          var xy = (xy <= 1) ? xy * Math.min (g.c.height, g.c.width) : xy;
          return xy;
        };
        c.y = function (y)
        {
          var y = (y <= 1) ? y * g.c.height : y;
          return y;
        };

        delete g['c'];

        g.c = c;
        c.a ();
        w.d.body.appendChild (g.c);
  },

  set d (c)
  {
    var c = c;
        /*
          c - color
          f - fill
          s - size
        */

        c.id = (c.id) ? c.id : g.scene.length;

        c.type = 'box'; // h w x y
        c.type = (c.i) ? 'image' : c.type; // i x y
        c.type = (c.a) ? 'line' : c.type; // a b x y
        c.type = (c.r) ? 'ring' : c.type; // r x y
        c.type = (c.t) ? 'text' : c.type; // t x y

        g.scene[c.id] = c;
  },

  draw: function ()
  {
    g.c.c.clearRect (0, 0, g.c.width, g.c.height);

    for (var id in g.scene)
    {
      var c = g.scene[id];

      var a = g.c.x (c.a);
      var b = g.c.y (c.b);

      var x = g.c.x (c.x);
      var y = g.c.y (c.y);

      var w = g.c.x (c.w);
      var h = g.c.y (c.h);

      var r = g.c.xymin (c.r);

      g.c.c.beginPath ();

      switch (c.type)
      {
        case 'box':
          var _ = (c.f) ? g.c.c.fillRect (x, y, w, h) : g.c.c.strokeRect (x, y, w, h);
          break;

        case 'image':
          var _ = (c.h) ? g.c.c.drawImage (c.i, x, y, w, h) : g.c.c.drawImage (c.i, x, y);
          break;

        case 'line':
          g.c.c.moveTo (a, b);
          g.c.c.lineTo (x, y);
          break;

        case 'ring':
          g.c.c.arc (x, y, r, 0, 2 * Math.PI);
          var _ = (c.f) ? g.c.c.fill () : g.c.c.stroke ();
          break;

        case 'text':
          g.c.c.font = (c.s) ? c.s + ' ' + g.s.font.family : g.s.font.size + ' ' + g.s.font.family;
          var _ = (c.f) ? g.c.c.fillText (c.t, x, y) : g.c.c.strokeText (c.t, x, y) ;
          break;
      }
    };
  },

  e: {},

  event: function (event)
  {
    g.e = event;
    g.run ();
  },

  i:
  {
    set l (list)
    {
      for (var id in list)
      {
        var i = new Image ();
            i.name = id;
            i.src = list[id];
        g.i[id] = i;
      };
    }
  },

  load: function ()
  {
    g.e = { type: 'preload' };

    g.c ();

    //window
    Object.defineProperty
    (
    	w,
    	'ontick',
    	{
    		set: function (f)
    		{
    			w.timer = w.setInterval
    			(
    				function ()
    				{
    					f ({ type: 'tick' });
    					g.s.time += g.s.tick;
    				},
    				g.s.tick
    			);
    		}
    	}
    );

    w.onclick = g.event;
    w.onload = g.event;
    w.onmousedown = g.event;
    w.onmousemove = g.event;
    w.onmouseup = g.event;
    w.onresize = g.event;
    w.ontick = g.event;
  },

  set log (text)
  {
    w.console.log (text);
  },

  run: function ()
  {
    g.update ();
    g.draw ();
  },

  s:
  {
    font:
    {
      family: 'Arial',
      size: '1em'
    },
    tick: 1000,
    time: 0
  },

  scene: [],

  update: function ()
  {
    g.c.update ();
    for (var id in g.buttons) { g.buttons[id].update (); };
  }
};

g.load ();
g.run ();

g.i.l =
{
  logo: 'logo.svg',
  logo1: 'logo1.svg'
};

//g.d = { x: 100, y: 110, h: 40, w: 100 };

//g.d = { x: 300, y: 110, r: 50, f: true };

//g.d = { x: 100, y: 110, t: 'text', f: true, s: '100px' };

//g.d = { i: g.i.logo, x: (g.c.width/2 - 59/2) / g.c.width, y: (g.c.height/2 - 72/2) / g.c.height};

g.b =
{ x: (g.c.width/2 - 59/2) / g.c.width, y: (g.c.height/2 - 72/2) / g.c.height, h: 72, w: 59, i0: g.i.logo, i1: g.i.logo1, id: 'logo',
  a: function ()
  {
    g.log = 'click';
  }
};

g.b =
{ x: (g.c.width/2 - 59/2) / g.c.width, y: (g.c.height/3 - 72/2) / g.c.height, h: 72, w: 59, i0: g.i.logo, i1: g.i.logo1, id: 'logo2',
  a: function ()
  {
    g.log = 'click';
  }
};

</script></body></html>
